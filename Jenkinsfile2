pipeline {
  agent {
    kubernetes {
      yamlFile 'jenkins-yaml/pod.yaml'
    }
  }
  stages {
     container('maven') {
        stage('Maintain Latest 5 Builds'){
            steps{
                maintainLatestFiveBuilds()
            }   
        }

        stage('Checkout Source Code'){
          steps{
              checkoutSCM()
          }
        }

        stage('Check Secrets'){
            steps{
                  secretCheck()
            }
        }

        stage('Maven Unit Test'){
          steps{
                  mavenUnitTest()
          }
        }
    }
  }
}